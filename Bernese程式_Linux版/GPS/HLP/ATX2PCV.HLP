<html>
<body>

<center>
<b>CONVERT ANTEX TO BERNESE FORMAT</b>
<p>Program: ATX2PCV
</center>
<hr width="100%">

<a name="ENVIRONMENT"   default="%% %%"></a>
<a name="CAMPAIGN"      default=""></a>
<a name="SESSION_TABLE" default="SESSIONS"></a>
<a name="YR4_INFO"      default="$Y+0"></a>
<a name="SES_INFO"      default="$S+0"></a>
<a name="USR_INFO"      default="${USER}"></a>
<a name="DEBUG"         default="0"></a>

<p><b>GENERAL DESCRIPTION</b>
<p>
The program converts external phase center offsets and patterns (format
from NGS or ANTEX up to version 1.4) into the internal Bernese format for
phase center corrections.

<p><hr>

<p><b>ATX2PCV 1: Input</b>

<a name="SHOWGEN" default="1"></a>
<p><b>GENERAL FILES</b>
<p><b>Show all general files:</b>
Check this box to get a list of the general input files used by this program
as well as the currently active campaign, session, and session table.

<br><br>

<a name="PHASEXT" default=""></a>
<p><b>INPUT FILENAMES</b>
<p><b>External phase center offsets:</b>
Select the file with the phase center offsets in the official ANTEX format
(up to version 1.3) or in the NGS format. The program automatically
recognizes the correct format. But note that the NGS format can only be
converted to Bernese format and none of the following options is active.

<a name="PHASECC" default=""></a>
<p><b>Bernese phase center offsets file:</b>
Select a Bernese PCV file. The Bernese PCV file may be converted from
relative to absolute and/or updated by adding new antennas from ANTEX or
updating existing antennas with new antenna information from ANTEX.

<p>Example: <a href="/$X/GEN/PCV.I08">$X/GEN/PCV.I08</a>

<a name="STAINFO" default=""></a>
<p><b>Station information file:</b>
The program extends the Bernese PCV file with all antennas which are given
in the station information file but which not available in the external PCV
file.
Values are taken from the NONE antenna of the same antenna type.

<p><a href="/$X/DOC/EXAMPLE.STA">Example</a>

<br><br>

<a name="CONVERT" default="0">
<p><b>OPTIONS FOR BERNESE INPUT FILE</b></a>
<p><b>Conversion from relative to absolute PCV:</b>
This option may be activated to convert the existing relative Bernese PCV file
to an absolute Bernese PCV file. A relative PCV file and an absolute
ANTEX file are required as input.

<p><i>Default value:</i> <tt>unmarked</tt>

<a name="ABS2REL" default="0">
<p><b>Abs to rel for ATX:</b>
An additional option is the conversion from absolute calibrated antennas in
ANTEX back to relative values. In that case the <tt>AOAD/M_T......NONE</tt>
antenna has to be included in the absolute ANTEX file as well as in the relative
Bernese input file.

<p><i>Default value:</i> <tt>unmarked</tt>

<a name="RADCOD" default="0">
<p><b>Consider antennas without radome code:</b>
With this option activated, antennas from the input Bernese PCV file without
radome code are written to the output Bernese PCV file. Missing radome codes
are replaced by the string ???? to remind the user that he should insert
proper radome codes.

<p><i>Default value:</i> <tt>unmarked</tt>

<br><br>

<a name="PHASRSG" default=""></a>
<p><b>RESULT FILE</b>
<p><b>Bernese phase center offsets:</b>
Specify the filename for the output file for the phase center offsets in the
internal Bernese format.

<p>Example: <a href="/$X/GEN/PHAS_COD.REL">$X/GEN/PHAS_COD.REL</a>.

<br><br>

<a name="SYSODEF" default="1"></a>
<a name="SYSOUT"  default="ATX2PCV"></a>
<p><b>GENERAL OUTPUT FILES</b>
<p><b>Program output:</b>
You can choose to have the program output written to a separate file for each
program run (checkbox marked), or to specify a name for the output file.
<br>
If you mark the checkbox, the filename will correspond to the program name
with an extension containing a counter (Lnn), which is automatically
incremented for each program run. If the counter reaches the maximum value, it
is automatically reset, and existing files will be overwritten.
The maximum value can be set in
<b>Menu &gt; Configure &gt; Program Names</b>, option "Maximum program output
file number".
<br>
If the checkbox is unmarked, you have to specify a name for the program
output file. This allows to characterize the program run, e.g., by using the
day and year (<tt>$YD+0</tt>) in the filename.

<a name="ERRMRG" default="0"></a>
<a name="SYSERR" default="ERROR"></a>
<p><b>Error messages:</b>
You can choose to have error messages written into the program's output
file (see above), or to specify a separate file to which error messages are
written.

<br><br>

<a name="TITLE" default=""></a>
<p><b>TITLE</b>
<p>
This title line will be printed as header comment into the program output
to document the program run. The title should characterize the program run by,
e.g., giving the most important options used and the session.

<p><hr>

<p><b>ATX2PCV 1.1: General Files</b>

<a name="CONST" default="CONST."></a>
<p><b>GENERAL INPUT FILES</b>
<p><b>General constants:</b>
This file contains all the physical and astronomical constants used
in the Bernese GNSS Software. Most probably you will never have to
modify this file.

<p>Example: <a href="/$X/GEN/CONST.">$X/GEN/CONST.</a>

<a name="SATELL" default="SATELLIT.I08"></a>
<p><b>Satellite information:</b>
This file contains general information on GNSS (and LEO/GEO) satellites.
For the session to be processed, each satellite has to
appear once in this file within a corresponding time window.

<p><i>Important:</i>
There are two types of satellite information files: one consistent with
relative satellite antenna patterns (SATELLIT.REL), the other consistent with
absolute satellite antenna patterns (SATELLIT.ABS). Make sure to always use
the correct file in conjunction with a relative or absolute phase pattern file!

<p><i>Note:</i>
The files <tt>$X/GEN/SATELLIT.???</tt> are maintained by AIUB/CODE.
They include a complete history of the satellites of the various GNSS constellations
(and newly launched satellites are regularly added).
You can get the latest version of these files from the
<a href="/$X/DOC/README_AIUB_AFTP.TXT">anonymous ftp</a> account of AIUB.

<p>Example: <a href="/$X/GEN/SATELLIT.I08">$X/GEN/SATELLIT.I08</a>

<a name="RECEIVR" default="RECEIVER."></a>
<p><b>Receiver information:</b>
This file contains among other things the tracked systems of the different
receivers. These specification is used to fill arrays of the system for
each connected antennas either with system specific values or with values
copied from GPS. If you leave this field blank only values from ANTEX and
from old Bernese input file are included in the output Bernese PCV file.

<p>Example: <a href="/$X/GEN/RECEIVER.">$X/GEN/RECEIVER.</a>

<p><hr>

<p><b>ATX2PCV 2: ANTEX Conversion</b>

<a name="ATXFIL" default="1"></a>
<p><b>MISSING RECEIVER AND SATELLITE ANTENNA PATTERNS</b>
<p>
The input file may only contain measured pattern values. Depending on
the measurement technique, pattern values close to the limiting zenith or nadir
angle may be missing. The following options allow for a default treatment
of such missing values.

<p><i>Remark:</i>
The options are only available for the conversion from the ANTEX
format to the Bernese format.

<p><b>Special handling of missing values:</b>
Check this box to activate the special handling of missing values for both
receiver and satellite antenna phase patterns.

<a name="MXFZEN" default="90"></a>
<a name="FILREC" default="LAST_VALUE"></a>
<p><b>Fill missing values up to a MAXIMUM ZENITH ANGLE of:</b>
Specify the maximum zenith angle for which you wish to write phase patterns
for receiver antennas. Specify one of the following options:
<ul>
<li>with <b>ZEROS:</b> Extrapolate the phase pattern up to the specified
       angle by zeroes.
<li>with <b>LAST_VALUE:</b> Extrapolate the phase pattern up to the
       specified angle using the last available value.
<li>with <b>AOAD/M_T:</b> Extrapolate the phase pattern up to the
       specified angle using the values for the AOAD/M_T antenna.
</ul>

<a name="MXFNAD" default="15"></a>
<a name="FILSAT" default="LAST_VALUE"></a>
<p><b>Fill missing values up to a MAXIMUM NADIR ANGLE of:</b>
Specify the maximum nadir angle for which you wish to write phase patterns
for satellite antennas. Specify one of the following options:
<ul>
<li>with <b>ZEROS:</b> Extrapolate the phase pattern up to the specified
       angle by zeroes.
<li>with <b>LAST_VALUE:</b> Extrapolate the phase pattern up to the
       specified angle using the last available value.
</ul>

<a name="FILINDV" default="GROUP_DIFF"></a>
<p><b>Fill missing system values for individually calibrated receiver antennas:</b>
Specify one of the following options:
<ul>
<li>with <b>GPS_VALUES:</b> Fill the missing pattern values for GLONASS or
    Galileo with values from GPS.
<li>with <b>GROUP_VALUES:</b> Fill the missing pattern values for GLONASS or
    Galileo with group values from the same system of an antenna of the
    same type. GPS values will be copied, if system values are not
    available.
<li>with <b>GROUP_DIFF:</b> Compute the difference between group values of
    GPS and GLONASS/Galileo of the same antenna type and fill the
    missing system pattern values of the individually calibrated antenna
    by adding these differences to the individually calibrated GPS values.
    GPS values will be copied, if system values are not available.
</ul>

<br><br>

<a name="NOZERO" default="1"></a>
<p><b>OPTIONS</b>
<p><b>Do not write zero patterns:</b>
This option may be activated to suppress the writing of phase center variations
to the output file if all individual values are equal to zero.

<p><i>Default value:</i> <tt>marked</tt>

<a name="ANTNUM" default="0"></a>
<p><b>Set number of generic receiver antennas to 999999:</b>
This option may be activated to set the number of generic receiver antennas
to 999999. If unmarked, the antenna number will be set to zero.
<br>
This is necessary to distinguish
for type-specific receiver antenna calibrations between two cases:
<ul>
<li>consider individual calibrations for some of the antennas (999999 - checkbox marked)</li>
<li>consider type-specific calibrations for all antennas (0 - checkbox unmarked)</li>
</ul>

<i>Remark:</i>
Please remind that calibration values for all antennas
with number different from 999999 in the station information
file must be available with individually calibrations.

<p><i>Default value:</i> <tt>unmarked</tt>

<a name="ONLYELE" default="0"></a>
<p><b>Elevation dependent receiver patterns only:</b>
Check this box to activate the writing of only elevation dependent antenna
phase patterns in the Bernese PCV file.

<p><i>Default value:</i> <tt>unmarked</tt>

<a name="ONLYGPS" default="0"></a>
<p><b>Consider GPS values only:</b>
Check this box to read only GPS values for receiver antennas from Bernese
PCV file.

<p><i>Default value:</i> <tt>unmarked</tt>

<p><hr>

</body>
</html>
